{"version":3,"sources":["containers/Search/components/SearchBox/index.js","containers/Search/components/PopularSearch/index.js","containers/Search/components/SearchHistory/index.js","containers/Search/index.js"],"names":["SearchBox","handleChange","e","text","target","value","_this","props","onChange","handleClear","onClear","handleClick","id","onClickKeyword","handleCancel","inputText","this","visiable","length","react_default","a","createElement","className","onClick","onCancel","renderSuggestList","_this2","relatedKeywords","map","item","key","bind","keyword","quantity","Component","PopularSearch","handleClickKeywords","preProps","preState","data","SearchHistory","onClaerHistory","Search","handleChangeInput","_this$props$searchAct","searchActions","setInputText","loadRelatedKeywords","handleClearInput","clearInputText","handleCancelInput","console","log","history","goBack","handleClickKeyword","addHistoryKeyword","loadSearchResult","searchResultActions","push","handleClearHistory","clearHistoryKeywords","_this$props","popularKeywords","historyKeywords","components_SearchBox","components_PopularSearch","components_SearchHistory","loadPopularKeywords","connect","state","getInputText","getPopularKeywords","getRelatedKeywords","getHistoryKeywords","dispatch","bindActionCreators"],"mappings":"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","file":"static/js/9.b054ff6a.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\n\r\nclass SearchBox extends Component {\r\n    render() {\r\n        const { inputText } = this.props\r\n        const visiable = inputText.length > 0 ? true : false\r\n        return (\r\n            <div className=\"searchBox\">\r\n                <div className=\"searchBox__container\">\r\n                    <input\r\n                        className=\"searchBox__text\"\r\n                        value={inputText}\r\n                        onChange={this.handleChange}\r\n                    />\r\n                    {visiable ? (\r\n                        <span\r\n                            className=\"searchBox__clear\"\r\n                            onClick={this.handleClear}\r\n                        />\r\n                    ) : null}\r\n                    <span className=\"searchBox__cancel\" onClick={this.props.onCancel}>取消</span>\r\n                </div>\r\n                {visiable ? this.renderSuggestList() : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderSuggestList() {\r\n        const { relatedKeywords } = this.props\r\n        return (\r\n            <ul className=\"searchBox__list\">\r\n                {relatedKeywords.map(item => {\r\n                    return (\r\n                        <li className=\"searchBox__item\" key={item.id} onClick={this.handleClick.bind(this, item.id)}>\r\n                            <span className=\"searchBox__itemKeyworkd\">\r\n                                {item.keyword}\r\n                            </span>\r\n                            <span className=\"searchBox__itemQuantity\">\r\n                                约{item.quantity}个结果\r\n                            </span>\r\n                        </li>\r\n                    )\r\n                })}\r\n            </ul>\r\n        )\r\n    }\r\n\r\n    handleChange = e => {\r\n        const text = e.target.value\r\n        this.props.onChange(text)\r\n    }\r\n\r\n    handleClear = () => {\r\n        this.props.onClear()\r\n    }\r\n\r\n    handleClick =  (id) => {\r\n        this.props.onClickKeyword(id)\r\n    }\r\n\r\n    handleCancel = () => {}\r\n}\r\n\r\nexport default SearchBox\r\n","import React, { Component } from 'react'\nimport './style.css'\n\nclass PopularSearch extends Component {\n    shouldComponentUpdate(preProps, preState) {\n        // 流行关键词已经加载了就不必再重绘\n        if (this.props.data.length > 0) {\n            return false\n        } else {\n            return true\n        }\n    }\n\n    render() {\n        const { data } = this.props\n        return (\n            <div className=\"popularSearch\">\n                {data.map(item => {\n                    return (\n                        <span\n                            key={item.id}\n                            className=\"popularSearch__item\"\n                            onClick={this.handleClickKeywords.bind(this, item.id)}\n                        >\n                            {item.keyword}\n                        </span>\n                    )\n                })}\n            </div>\n        )\n    }\n\n    handleClickKeywords = (id) => {\n        this.props.onClickKeyword(id)\n    }\n}\n\nexport default PopularSearch\n","import React, { Component } from 'react'\nimport './style.css'\n\nclass SearchHistory extends Component {\n    shouldComponentUpdate(preProps, preState) {\n        if (preProps.data.length !== this.props.data.length) {\n            return true\n        }\n        return false\n    }\n\n    render() {\n        const { data } = this.props\n        return (\n            <div className=\"searchHistory\">\n                <div className=\"searchHistory__header\">搜索记录</div>\n                <ul className=\"searchHistory__list\">\n                    {data.map((item) => {\n                        return (\n                            <li\n                                key={item.id}\n                                onClick={this.handleClick}\n                                className=\"searchHistory__item\"\n                            >\n                                {item.keyword}\n                            </li>\n                        )\n                    })}\n                </ul>\n                <div\n                    className=\"searchHistory__clear\"\n                    onClick={this.handleClear}\n                >\n                    清除搜索记录\n                </div>\n            </div>\n        )\n    }\n\n    handleClick = () => {}\n\n    handleClear = () => {\n        this.props.onClaerHistory()\n    }\n}\n\nexport default SearchHistory\n","import React, { Component } from 'react'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport SearchBox from './components/SearchBox'\r\nimport PopularSearch from './components/PopularSearch'\r\nimport SearchHistory from './components/SearchHistory'\r\nimport {\r\n    actions as searchActions,\r\n    getInputText,\r\n    getPopularKeywords,\r\n    getRelatedKeywords,\r\n    getHistoryKeywords\r\n} from '../../redux/modules/search'\r\nimport { actions as searchResultActions } from '../../redux/modules/searchResult'\r\n\r\nclass Search extends Component {\r\n    render() {\r\n        const {\r\n            inputText,\r\n            popularKeywords,\r\n            relatedKeywords,\r\n            historyKeywords\r\n        } = this.props\r\n        return (\r\n            <div>\r\n                <SearchBox\r\n                    inputText={inputText}\r\n                    relatedKeywords={relatedKeywords}\r\n                    onChange={this.handleChangeInput}\r\n                    onClear={this.handleClearInput}\r\n                    onCancel={this.handleCancelInput}\r\n                    onClickKeyword={this.handleClickKeyword}\r\n                />\r\n                <PopularSearch\r\n                    data={popularKeywords}\r\n                    onClickKeyword={this.handleClickKeyword}\r\n                />\r\n                <SearchHistory\r\n                    data={historyKeywords}\r\n                    onClaerHistory={this.handleClearHistory}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    componentDidMount() {\r\n        // 组件挂载后加载流行词\r\n        const { loadPopularKeywords } = this.props.searchActions\r\n        loadPopularKeywords()\r\n    }\r\n\r\n    // 搜索框文本变化\r\n    handleChangeInput = text => {\r\n        // 1. 更新搜索框文本状态 2. 发送请求关键词\r\n        const { setInputText, loadRelatedKeywords } = this.props.searchActions\r\n        setInputText(text)\r\n        loadRelatedKeywords(text)\r\n    }\r\n\r\n    // 清除搜索框文本信息\r\n    handleClearInput = () => {\r\n        const { clearInputText } = this.props.searchActions\r\n        clearInputText()\r\n    }\r\n\r\n    // 取消输入，\r\n    handleCancelInput = () => {\r\n        // 1. 清除输入框内容。 2. 返回到主页\r\n        const { clearInputText } = this.props.searchActions\r\n        clearInputText()\r\n        console.log('点击了取消')\r\n        this.props.history.goBack()\r\n    }\r\n\r\n    // 处理点击关键词\r\n    handleClickKeyword = keyword => {\r\n        // 1. 添加到历史记录 2. 加载搜索结果页的商品列表 3. 跳转到新页面\r\n        const { addHistoryKeyword } = this.props.searchActions\r\n        addHistoryKeyword(keyword)\r\n        const { loadSearchResult } = this.props.searchResultActions\r\n        loadSearchResult(keyword)\r\n        this.props.history.push('/search_result')\r\n    }\r\n\r\n    // 清除历史记录\r\n    handleClearHistory = () => {\r\n        const { clearHistoryKeywords } = this.props.searchActions\r\n        clearHistoryKeywords()\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        inputText: getInputText(state),\r\n        popularKeywords: getPopularKeywords(state),\r\n        relatedKeywords: getRelatedKeywords(state),\r\n        historyKeywords: getHistoryKeywords(state)\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        searchActions: bindActionCreators(searchActions, dispatch),\r\n        searchResultActions: bindActionCreators(searchResultActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Search)\r\n"],"sourceRoot":""}