(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,t,n){"use strict";n.d(t,"g",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return d}),n.d(t,"h",function(){return f}),n.d(t,"d",function(){return E}),n.d(t,"f",function(){return p});var r=n(29),u=n(2),c=n(1);function o(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var i={name:"orders",id:"id"},a=2,s=3,d=4,l=10,f={ADD_ORDER:"ORDER/ADD_ORDER",DELETE_ORDER:"ORDER/DELETE_ORDER",ADD_COMMENT:"ORDER/ADD_COMMENT"},E={addOrder:function(e){var t="o-".concat(l++);return{type:f.ADD_ORDER,orderId:t,order:Object(c.a)({},e,{id:t})}},deleteOrder:function(e){return{type:f.DELETE_ORDER,orderId:e}},addComment:function(e,t){return{type:f.ADD_COMMENT,orderId:e,commentId:t}}};t.e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===f.ADD_ORDER)return Object(c.a)({},e,Object(u.a)({},t.orderId,t.order));if(t.type===f.DELETE_ORDER){var n=t.orderId;return e[n],Object(r.a)(e,[n].map(o))}return t.type===f.ADD_COMMENT?Object(c.a)({},e,Object(u.a)({},t.orderId,Object(c.a)({},e[t.orderId],{commentId:t.commentId}))):t.response&&t.response.orders?Object(c.a)({},e,t.response.orders):e};var p=function(e){return e.entities.orders}},function(e,t,n){"use strict";var r=n(48),u=n(1),c=n(2),o=new Headers({Accept:"application/json","Content-Type":"application/json"});function i(e,t){var n=t;if(200===n.status)return n.json();console.error("Request fail. url:".concat(e)),Promise.reject({error:{message:"Request failed due to server error"}})}n.d(t,"a",function(){return d});var a=function(e,t){return(n=e,fetch(n,{method:"GET",headers:o}).then(function(e){return i(n,e)}).catch(function(e){return console.error("GET Request fail. url:".concat(n,". message:").concat(e)),Promise.reject({error:{message:"GET Request failed."}})})).then(function(e){return s(e,t)});var n},s=function(e,t){var n,r=t.id,u=t.name,o={},i=[];return Array.isArray(e)?e.forEach(function(e){o[e[r]]=e,i.push(e[r])}):(o[e[r]]=e,i.push(e[r])),n={},Object(c.a)(n,u,o),Object(c.a)(n,"ids",i),n},d="FETCH DATA";t.b=function(e){return function(e){return function(t){var n=t[d];if("undefined"===typeof n)return e(t);var c=n.endpoint,o=n.schema,i=n.types;if("string"!==typeof c)throw new Error("endpoint\u5fc5\u987b\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\u7684URL");if(!o)throw new Error("\u5fc5\u987b\u6307\u5b9a\u9886\u57df\u5b9e\u4f53\u7684schema");if(!Array.isArray(i)&&3!==i.length)throw new Error("\u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\u5305\u542b\u4e86\u4e09\u4e2aaction type\u7684\u6570\u7ec4");if(!i.every(function(e){return"string"===typeof e}))throw new Error("action type\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32");var s=function(e){var n=Object(u.a)({},t,e);return delete n[d],n},l=Object(r.a)(i,3),f=l[0],E=l[1],p=l[2];return e(s({type:f})),a(c,o).then(function(t){e(s({type:E,response:t}))},function(t){return e(s({type:p,error:t.message||"\u83b7\u53d6\u6570\u636e\u5931\u8d25"}))})}}}},,function(e,t,n){"use strict";t.a={getProductList:function(e,t,n){return"/mock/products/".concat(e,".json?rowIndex=").concat(t,"&pageSize=").concat(n)},getProductDetail:function(e){return"/mock/products_detail/".concat(e,".json")},getRelatedShop:function(e){return"/mock/shops/".concat(e,".json")},getPopularKeywords:function(){return"/mock/keywords/popular.json"},getRelatedKeywords:function(e){return"/mock/keywords/related.json?keyword=".concat(e)},getSearchResult:function(e){return"/mock/shops/related.json?keyword=".concat(e)},getOrders:function(){return"/mock/orders/orders.json"}}},,,,,function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"b",function(){return c});var r=n(1),u={name:"products",id:"id"};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.response&&t.response.products?Object(r.a)({},e,t.response.products):e};var c=function(e,t){var n=e.entities.products[t];return n&&n.detail&&n.purchaseNotes?n:null}},function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"b",function(){return c});var r=n(1),u={id:"id",name:"shops"};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.response&&t.response.shops?Object(r.a)({},e,t.response.shops):e};var c=function(e,t){return e.entities.shops[t]}},,,,,,,,function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"b",function(){return c});var r=n(1),u={name:"keywords",id:"id"};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.response&&t.response.keywords?Object(r.a)({},e,t.response.keywords):e};var c=function(e,t){if(!t)return null;var n=e.entities.keywords[t];return n||null}},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"e",function(){return O}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return m});var r=n(1),u={username:localStorage.getItem("username")||"",password:"",isFetching:"",status:localStorage.getItem("status")||!1},c="LOGIN/LOGIN_REQUEST",o="LOGIN/LOGIN_SUCCESS",i="LOGIN/LOGIN_FAILUER",a="LOGIN/LOGOUT",s="LOGIN/SET_USERNAME",d="LOGIN/SET_PASSWORD",l={login:function(){return function(e,t){var n=t().login,r=n.username,u=n.password;return!r||r.length<=0||!u||u.length<=0?e(p("\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a")):(e(f()),new Promise(function(t,n){setTimeout(function(){localStorage.setItem("username",r),localStorage.setItem("status",!0),e(E()),t()},1e3)}))}},logout:function(){return localStorage.removeItem("username"),localStorage.removeItem("status"),{type:a}},setUsername:function(e){return{type:s,username:e}},setPassword:function(e){return{type:d,password:e}}},f=function(){return{type:c}},E=function(){return{type:o,status:!0}},p=function(e){return{type:i,error:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return Object(r.a)({},e,{isFetching:!0});case o:return Object(r.a)({},e,{isFetching:!1,status:!0,username:t.username,password:t.password});case i:return Object(r.a)({},e,{error:t.error});case a:return Object(r.a)({},e,{status:!1});case s:return Object(r.a)({},e,{username:t.username});case d:return Object(r.a)({},e,{password:t.password});default:return e}};var O=function(e){return e.login.username},h=function(e){return e.login.passwrod},m=function(e){return e.login.status}},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(2),u=n(1),c="COMMENT/ADD_COMMENT",o={addComment:function(e){return{type:c,comment:e}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===c?Object(u.a)({},e,Object(r.a)({},t.comment.id,t.comment)):t.response&&t.response.comments?Object(u.a)({},e,t.response.comments):e}},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return m});var r=n(1),u=n(2),c=n(8),o=n(4),i=n(13),a=n(14),s=n(6),d={FETCH_PRODUCT_REQUEST:"DETAIL/FETCH_PRODUCT_REQUEST",FETCH_PRODUCT_SUCCESS:"DETAIL/FETCH_PRODUCT_SUCCESS",FETCH_PRODUCT_FAILURE:"DETAIL/FETCH_PRODUCT_FAILURE",FETCH_SHOP_REQUEST:"DETAIL/FETCH_SHOP_REQUEST",FETCH_SHOP_SUCCESS:"DETAIL/FETCH_SHOP_SUCCESS",FETCH_SHOP_FAILURE:"DETAIL/FETCH_SHOP_FAILURE"},l={product:{isFetching:!1,id:null},relatedShop:{isFetching:!1,id:null}},f={loadProductDetail:function(e){return function(t,n){if(h(n(),e))return t(function(e){return{type:d.FETCH_PRODUCT_DETAIL_SUCCESS,id:e}});var r=c.a.getProductDetail(e);return t(E(r,e))}},loadRelatedShop:function(e){return function(t,n){if(m(n(),e))return t({type:d.FETCH_SHOP_SUCCESS,id:e});var r=c.a.getRelatedShop(e);return t(p(r,e))}}},E=function(e,t){var n;return n={},Object(u.a)(n,s.a,{types:[d.FETCH_PRODUCT_REQUEST,d.FETCH_PRODUCT_SUCCESS,d.FETCH_PRODUCT_FAILURE],endpoint:e,schema:i.c}),Object(u.a)(n,"id",t),n},p=function(e,t){var n;return n={},Object(u.a)(n,s.a,{types:[d.FETCH_SHOP_REQUEST,d.FETCH_SHOP_SUCCESS,d.FETCH_SHOP_FAILURE],endpoint:e,schema:a.c}),Object(u.a)(n,"id",t),n},O=Object(o.c)({product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.product,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.FETCH_PRODUCT_REQUEST:return Object(r.a)({},e,{isFetching:!0});case d.FETCH_PRODUCT_SUCCESS:return Object(r.a)({},e,{isFetching:!1,id:t.id});case d.FETCH_PRODUCT_FAILURE:return Object(r.a)({},e,{isFetching:!1,id:null});default:return e}},relatedShop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.relatedShop,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.FETCH_SHOP_REQUEST:return Object(r.a)({},e,{isFetching:!0});case d.FETCH_SHOP_SUCCESS:return Object(r.a)({},e,{isFetching:!1,id:t.id});case d.FETCH_SHOP_FAILURE:return Object(r.a)({},e,{isFetching:!1,id:null});default:return e}}});t.b=O;var h=function(e,t){return Object(i.b)(e,t)},m=function(e,t){var n=e.entities.products[t];if(!n)return null;var r=n.nearestShop;return r?Object(a.b)(e,r):null}},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"c",function(){return O});var r=n(1),u=n(2),c=n(8),o=n(14),i=n(6),a="SEARCH/FETCH_SEARCH_RESULT_REQUEST",s="SEARCH/FETCH_SEARCH_RESULT_SUCCESS",d="SEARCH/FETCH_SEARCH_RESULT_FAILURE",l={searchResult:{}},f={loadSearchResult:function(e){return function(t,n){if(n().searchResult[e])return null;var r=c.a.getSearchResult(e);return t(E(r,e))}}},E=function(e,t){var n;return n={},Object(u.a)(n,i.a,{types:[a,s,d],endpoint:e,schema:o.c}),Object(u.a)(n,"keywordId",t),n},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return Object(r.a)({},e,{isFetching:!0});case s:return Object(r.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids)});case d:return Object(r.a)({},e,{isFetching:!1});default:return e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.searchResult,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:case s:case d:return Object(r.a)({},e,Object(u.a)({},t.keywordId,p(e[t.keywordId],t)));default:return e}};var O=function(e){var t=e.search.historyKeywords[0];if(!t)return[];var n=e.searchResult[t];return n?n.ids.map(function(t){return Object(o.b)(e,t)}):[]}},function(e,t,n){"use strict";n.d(t,"a",function(){return H}),n.d(t,"f",function(){return k}),n.d(t,"c",function(){return K}),n.d(t,"i",function(){return x}),n.d(t,"h",function(){return Q}),n.d(t,"d",function(){return G}),n.d(t,"e",function(){return W}),n.d(t,"g",function(){return q});var r,u=n(1),c=n(2),o=n(8),i=n(5),a=n(28),s=n(6),d=n(4),l=n(47),f=(r={},Object(c.a)(r,i.c,"toPayIds"),Object(c.a)(r,i.a,"availableIds"),Object(c.a)(r,i.b,"availableIds"),r),E={orders:{isFetching:!1,loaded:!1,ids:[],toPayIds:[],availableIds:[],refundIds:[]},currentTab:0,currentOrder:{id:null,isDeleting:!1,isCommenting:!1,comment:"",stars:0,commentTip:!1}},p="USER/FETCH_ORDERS_REQUEST",O="USER/FETCH_ORDERS_SUCCESS",h="USER/FETCH_ORDERS_FAILURE",m="USER/SET_CURRENT_TAB",S="USER/DELETE_ORDER_REQUEST",b="USER/DELETE_ORDER_SUCCESS",T="USER/DELETE_ORDER_FAILURE",R="USER/SHOW_DELETE_ORDER",_="USER/HIDE_DELETE_ORDER",v="USER/SHOW_COMMENT_AREA",C="USER/HIDE_COMMENT_AREA",y="USER/SET_COMMENT_CONTENT",g="USER/SET_STARS",j="USER/POST_COMMENT_REQUEST",D="USER/POST_COMMENT_SUCCESS",U="USER/POST_COMMENT_FAILURE",I="USER/SHOW_COMMENT_TIP",F="USER/HIDE_COMMENT_TIP",H={loadOrders:function(){return function(e,t){if(t().user.orders.loaded)return null;var n=o.a.getOrders();return e(w(n))}},setCurrentTab:function(e){return{type:m,index:e}},removeOrder:function(){return function(e,t){var n=t().user.currentOrder.id;n&&(e(A()),new Promise(function(t,r){setTimeout(function(){e(P(n)),e(i.d.deleteOrder(n)),t()},500)}))}},showDeleteDialog:function(e){return{type:R,orderId:e}},hideDeleteDialog:function(){return{type:_}},showCommentArea:function(e){return{type:v,orderId:e}},hideCommentArea:function(){return{type:C}},setCommentContent:function(e){return{type:y,comment:e}},setStars:function(e){return{type:g,stars:e}},submitComment:function(){return function(e,t){return e(L()),new Promise(function(n,r){setTimeout(function(){var r=t().user.currentOrder,u=r.id,c=r.stars,o=r.comment,s={id:+new Date,stars:c,content:o};e(M()),e(i.d.addComment(u,s.id)),e(a.a.addComment(s)),n()})})}},showCommentTip:function(){return{type:I}},hideCommentTip:function(){return{type:F}}},w=function(e){return Object(c.a)({},s.a,{types:[p,O,h],endpoint:e,schema:i.g})},A=function(){return{type:S}},P=function(e){return{type:b,orderId:e}},L=function(){return{type:j}},M=function(){return{type:D}},N=Object(d.c)({orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.orders,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(u.a)({},e,{isFetching:!0});case O:var n=t.response,r=n.ids.filter(function(e){return n.orders[e].type===i.c}),o=n.ids.filter(function(e){return n.orders[e].type===i.a}),a=n.ids.filter(function(e){return n.orders[e].type===i.b});return Object(u.a)({},e,{isFetching:!1,loaded:!0,ids:e.ids.concat(n.ids),toPayIds:e.toPayIds.concat(r),availableIds:e.availableIds.concat(o),refundIds:e.refundIds.concat(a)});case h:return Object(u.a)({},e,{isFetching:!1});case i.h.ADD_ORDER:var s=t.order,d=f[s.type];return d?Object(u.a)({},e,Object(c.a)({ids:[s.id].concat(e.ids)},d,[s.id].concat(e[d]))):Object(u.a)({},e,{ids:[s.id].concat(e.ids)});case i.h.DELETE_ORDER:case b:return Object(u.a)({},e,{ids:e.ids.filter(function(e){return e!==t.orderId}),toPayIds:e.toPayIds.filter(function(e){return e!==t.orderId}),availableIds:e.availableIds.filter(function(e){return e!==t.orderId}),refundIds:e.refundIds.filter(function(e){return e!==t.orderId})});default:return e}},currentTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.currentTab,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.index;default:return e}},currentOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.currentOrder,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(u.a)({},e,{id:t.orderId,isDeleting:!0});case v:return Object(u.a)({},e,{id:t.orderId,isCommenting:!0});case C:case _:case b:case T:case D:case U:return Object(u.a)({},e,{id:null,isDeleting:!1,isCommenting:!1,comment:"",stars:0});case y:return Object(u.a)({},e,{comment:t.comment});case g:return Object(u.a)({},e,{stars:t.stars});case I:return Object(u.a)({},e,{commentTip:!0});case F:return Object(u.a)({},e,{commentTip:!1});default:return e}}});t.b=N;var k=function(e){return e.user.currentTab},K=function(e){return e.user.currentOrder.commentTip},x=Object(l.a)([k,function(e){return e.user.orders},i.f],function(e,t,n){return t[["ids","toPayIds","availableIds","refundIds"][e]].map(function(e){return n[e]})}),Q=function(e){if(e.user.currentOrder&&e.user.currentOrder.isDeleting)return e.user.currentOrder&&e.user.currentOrder.isDeleting?e.user.currentOrder.id:null},G=function(e){return e.user.currentOrder&&e.user.currentOrder.isCommenting?e.user.currentOrder.id:null},W=function(e){return e.user.currentOrder?e.user.currentOrder.comment:""},q=function(e){return e.user.currentOrder?e.user.currentOrder.stars:0}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return T}),n.d(t,"d",function(){return C}),n.d(t,"c",function(){return y}),n.d(t,"e",function(){return g});var r=n(1),u=n(2),c=n(4),o=n(8),i=n(6),a=n(13),s="likes",d="discounts",l=5,f=3,E="HOME/FETCH_LIKES_REQUEST",p="HOME/FETCH_LIKES_SUCCESS",O="HOME/FETCH_LIKES_FAILURE",h="HOME/FETCH_DISCOUNTS_REQUEST",m="HOME/FETCH_DISCOUNTS_SUCCESS",S="HOME/FETCH_DISCOUNTS_FAILURE",b={likes:{isFetching:!1,pageCount:0,ids:[]},discounts:{isFetching:!1,ids:[]}},T={loadLikes:function(){return function(e,t){var n=t().home.likes.pageCount*l,r=o.a.getProductList(s,n,l);return e(R(r))}},loadDiscounts:function(){return function(e,t){if(t().home.discounts.ids.length>0)return null;var n=o.a.getProductList(d,0,f);return e(_(n))}}},R=function(e){return Object(u.a)({},i.a,{types:[E,p,O],endpoint:e,schema:a.c})},_=function(e){return Object(u.a)({},i.a,{types:[h,m,S],endpoint:e,schema:a.c})},v=Object(c.c)({likes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.likes,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(r.a)({},e,{isFetching:!0});case p:return Object(r.a)({},e,{isFetching:!1,pageCount:e.pageCount+1,ids:e.ids.concat(t.response.ids)});case O:return Object(r.a)({},e,{isFetching:!1});default:return e}},discounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.discounts,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(r.a)({},e,{isFetching:!0});case m:return Object(r.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids)});case S:return Object(r.a)({},e,{isFetching:!1});default:return e}}});t.b=v;var C=function(e){return e.home.likes.ids.map(function(t){return e.entities.products[t]})},y=function(e){return e.home.discounts.ids.map(function(t){return e.entities.products[t]})},g=function(e){return e.home.likes.pageCount}},function(e,t,n){"use strict";n.d(t,"a",function(){return R}),n.d(t,"d",function(){return g}),n.d(t,"e",function(){return j}),n.d(t,"f",function(){return D}),n.d(t,"c",function(){return U});var r=n(49),u=n(1),c=n(2),o=n(4),i=n(8),a=n(6),s=n(22),d="SEARCH/FETCH_POPULAR_KEYWORDS_REQUEST",l="SEARCH/FETCH_POPULAR_KEYWORDS_SUCCESS",f="SEARCH/FETCH_POPULAR_KEYWORDS_FAILURE",E="SEARCH/FETCH_RELATED_KEYWORDS_REQUEST",p="SEARCH/FETCH_RELATED_KEYWORDS_SUCCESS",O="SEARCH/FETCH_RELATED_KEYWORDS_FAILURE",h="SEARCH/SET_INPUT_TEXT",m="SEARCH/CLEAR_INPUT_TEXT",S="SEARCH/ADD_HISTORY_KEYWORD",b="SEARCH/CLEAR_HISTORY_KEYWORD",T={inputText:"",popularKeywords:{isFetching:!1,ids:[]},relatedKeywords:{},historyKeywords:[]},R={loadPopularKeywords:function(){return function(e,t){if(t().search.popularKeywords.ids.length>0)return null;var n=i.a.getPopularKeywords();return e(_(n))}},loadRelatedKeywords:function(e){return function(t,n){if(n().search.relatedKeywords[e])return null;var r=i.a.getRelatedKeywords();return t(v(r,e))}},setInputText:function(e){return{type:h,text:e}},clearInputText:function(){return{type:m}},addHistoryKeyword:function(e){return{type:S,text:e}},clearHistoryKeywords:function(){return{type:b}}},_=function(e){return Object(c.a)({},a.a,{types:[d,l,f],schema:s.c,endpoint:e})},v=function(e,t){var n;return n={},Object(c.a)(n,a.a,{types:[E,p,O],schema:s.c,endpoint:e}),Object(c.a)(n,"text",t),n},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(u.a)({},e,{isFetching:!0});case p:return Object(u.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids)});case O:return Object(u.a)({},e,{isFetching:!1});default:return e}},y=Object(o.c)({popularKeywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.popularKeywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(u.a)({},e,{isFetching:!0});case l:return Object(u.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids)});case f:return Object(u.a)({},e,{isFetching:!1});default:return e}},relatedKeywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.relatedKeywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:case p:case O:return Object(u.a)({},e,Object(c.a)({},t.text,C(e[t.text],t)));default:return e}},inputText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.inputText,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return t.text;case m:return"";default:return e}},historyKeywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.historyKeywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:var n=e.filter(function(e){return e!==t.text});return[t.text].concat(Object(r.a)(n));case b:return[];default:return e}}});t.b=y;var g=function(e){return e.search.inputText},j=function(e){var t=e.search.popularKeywords.ids;return t?t.map(function(t){return Object(s.b)(e,t)}):null},D=function(e){var t=e.search.inputText;if(!t||0===t.trim().length)return[];var n=e.search.relatedKeywords[t];return n?n.ids.map(function(t){return Object(s.b)(e,t)}):[]},U=function(e){return e.search.historyKeywords.map(function(t){return Object(s.b)(e,t)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"d",function(){return f}),n.d(t,"e",function(){return E}),n.d(t,"c",function(){return p});var r=n(1),u=n(13),c=n(5),o="PURCHASE/SET_ORDER_QUANTITY",i="PURCHASE/CLOSE_TIP",a="PURCHASE/SUBMIT_ORDER_REQUEST",s="PURCHASE/SUBMIT_ORDER_SUCCESS",d={quantity:1,showTip:!1},l={setOrderQuantity:function(e){return{type:o,quantity:e}},closeTip:function(){return{type:i}},submitOrder:function(e){return function(t,n){return t({type:a}),new Promise(function(r,o){setTimeout(function(){var o=Object(u.b)(n(),e),i=n().purchase.quantity,a=(o.currentPrice*i).toFixed(1),d="".concat(i,"\u5f20 | \u603b\u4ef7\uff1a").concat(a),l=o.validityPeriod,f={title:"".concat(o.shop,":").concat(o.product),orderPicUrl:o.picture,channel:"\u56e2\u8d2d",statusText:"\u5f85\u6d88\u8d39",text:[d,l],type:c.a};t(c.d.addOrder(f)),t({type:s}),r()},500)})}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(r.a)({},e,{quantity:t.quantity});case i:return Object(r.a)({},e,{showTip:!1});case s:return Object(r.a)({},e,{showTip:!0});default:return e}};var f=function(e){var t=e.purchase;return t&&t.quantity?t.quantity:null},E=function(e){var t=e.purchase;return t&&t.showTip?t.showTip:null},p=function(e,t){return Object(u.b)(e,t)}},,,,,,,function(e,t,n){e.exports=n(62)},,,,,function(e,t,n){},,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(0),u=n.n(r),c=n(25),o=n.n(c),i=(n(55),n(23)),a=n(16),s=n(17),d=n(20),l=n(18),f=n(19),E=n(4),p=n(30),O=n(21),h=(n(60),function(e){function t(){return Object(a.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.msg;return u.a.createElement("div",{className:"errorToast"},u.a.createElement("div",{className:"errorToast_text"},e))}},{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout(function(){e.props.clearError()},3e3)}},{key:"componentWillMount",value:function(){this.timer&&clearTimeout(this.timer)}}]),t}(r.Component)),m=n(1),S="APP/CLEAR_ERROR",b={clearError:function(){return{type:S}}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.error;return n===S?Object(m.a)({},e,{error:null}):r?Object(m.a)({},e,{error:r}):e},R=function(e){return e.app.error},_=n(29),v=n(26),C=function(e){function t(){return Object(a.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.login,r=Object(_.a)(e,["component","login"]);return u.a.createElement(O.b,Object.assign({},r,{render:function(e){return n?u.a.createElement(t,e):u.a.createElement(O.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}}]),t}(r.Component),y=Object(i.b)(function(e,t){return{login:Object(v.d)(e)}},null)(C);function g(e){return function(t){function n(e){var t;return Object(a.a)(this,n),(t=Object(d.a)(this,Object(l.a)(n).call(this,e))).state={component:null},t}return Object(f.a)(n,t),Object(s.a)(n,[{key:"render",value:function(){var e=this.state.component;return e?u.a.createElement(e,this.props):null}},{key:"componentDidMount",value:function(){var t=this;e().then(function(e){t.setState({component:e.default})})}}]),n}(r.Component)}var j=g(function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,114))}),D=g(function(){return n.e(5).then(n.bind(null,115))}),U=g(function(){return n.e(9).then(n.bind(null,118))}),I=g(function(){return n.e(8).then(n.bind(null,117))}),F=g(function(){return n.e(10).then(n.bind(null,119))}),H=g(function(){return n.e(6).then(n.bind(null,116))}),w=g(function(){return n.e(7).then(n.bind(null,120))}),A=function(e){function t(){return Object(a.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.appActions.clearError;return u.a.createElement("div",{className:"App"},u.a.createElement(p.a,null,u.a.createElement(O.d,null,u.a.createElement(O.b,{path:"/login",component:F}),u.a.createElement(y,{path:"/user",component:H}),u.a.createElement(O.b,{path:"/detail/:id",component:D}),u.a.createElement(O.b,{path:"/search",component:U}),u.a.createElement(y,{path:"/purchase/:id",component:w}),u.a.createElement(O.b,{path:"/search_result",component:I}),u.a.createElement(O.b,{path:"/",component:j}))),t?u.a.createElement(h,{msg:t,clearError:n}):null)}}]),t}(r.Component),P=Object(i.b)(function(e,t){return{error:R(e)}},function(e){return{appActions:Object(E.b)(b,e)}})(A),L=n(46),M=n(6),N=n(13),k=n(14),K=n(5),x=n(28),Q=n(22),G=Object(E.c)({products:N.a,shops:k.a,orders:K.e,comments:x.b,keywords:Q.a}),W=n(41),q=n(36),Y=n(42),B=n(37),X=n(38),J=n(43),z=Object(E.c)({entities:G,home:W.b,detail:q.b,app:T,search:Y.b,searchResult:B.b,login:v.b,user:X.b,purchase:J.b}),V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||E.d,Z=Object(E.e)(z,V(Object(E.a)(L.a,M.b)));o.a.render(u.a.createElement(i.a,{store:Z},u.a.createElement(P,null)),document.getElementById("root"))}],[[50,1,2]]]);
//# sourceMappingURL=main.e24f049d.chunk.js.map