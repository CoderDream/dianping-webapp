{"version":3,"sources":["containers/ProductDetail/components/ProductOverview/index.js","containers/ProductDetail/components/ShopInfo/index.js","containers/ProductDetail/components/Detail/index.js","containers/ProductDetail/components/Remark/index.js","containers/ProductDetail/components/BuyButton/index.js","containers/ProductDetail/index.js","components/Header/index.js"],"names":["ProductOverview","_this$props$data","this","props","data","id","picture","shop","product","currentPrice","oldPrice","react_default","a","createElement","className","alt","src","react_router_dom","to","concat","Component","ShopInfo","name","address","phone","star","total","style","width","href","Detail","cellPadding","cellSpacing","colSpan","Remark","BuyButton","ProductDetail","handleClick","_this","history","goBack","nextProps","nextState","_this$props","relatedShop","Header","title","onBack","components_ProductOverview","components_ShopInfo","shopIds","length","components_Detail","components_Remark","components_BuyButton","productId","match","params","loadProductDetail","preProps","nearestShop","shopId","loadRelatedShop","connect","state","getProduct","getRelatedShop","dispatch","actions","color","react__WEBPACK_IMPORTED_MODULE_5___default","backgroundColor","onClick"],"mappings":"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","file":"static/js/5.3c8f6ed4.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport './style.css'\r\n\r\nclass ProductOverview extends Component {\r\n    render() {\r\n        const {\r\n            id,\r\n            picture,\r\n            shop,\r\n            product,\r\n            currentPrice,\r\n            oldPrice\r\n        } = this.props.data\r\n        return (\r\n            <div className=\"productOverview\">\r\n                <div className=\"productOverview__header\">\r\n                    <div className=\"productOverview__imgContainer\">\r\n                        <img\r\n                            alt=\"\"\r\n                            className=\"productOverview__img\"\r\n                            src={picture}\r\n                        />\r\n                    </div>\r\n                    <div className=\"productOverview__baseInfo\">\r\n                        <div className=\"productOverview__title\">{shop}</div>\r\n                        <div className=\"productOverview__content\">\r\n                            {product}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"productOverview__purchase\">\r\n                    <span className=\"productOverview__symbol\">¥</span>\r\n                    <span className=\"productOverview__price\">\r\n                        {currentPrice}\r\n                    </span>\r\n                    <span className=\"productOverview__price--old\">\r\n                        ¥{oldPrice}\r\n                    </span>\r\n                    {/* TODO 填写产品ID */}\r\n                    <Link \r\n                        className=\"productOverview__btn\" \r\n                        to={`/purchase/${id}`}>立即购买</Link>\r\n                </div>\r\n                <ul className=\"productOverview__remark\">\r\n                    <li className=\"productOverview__remarkItem\">\r\n                        <i className=\"productOverview__sign1\" />\r\n                        <span className=\"productOverview__desc\">随时可退</span>\r\n                    </li>\r\n                    <li className=\"productOverview__remarkItem\">\r\n                        <i className=\"productOverview__sign2\" />\r\n                        <span className=\"productOverview__desc\">\r\n                            过期自动退\r\n                        </span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProductOverview\r\n","import React, { Component } from 'react'\nimport './style.css'\n\nclass ShopInfo extends Component {\n    render() {\n        const { name, address, phone, star } = this.props.data\n        const { total } = this.props.total\n        return (\n            <div className=\"shopInfo\">\n                <div className=\"shopInfo__header\">\n                    使用商户（{total}）\n                    <span className=\"shopInfo__arrow\" />\n                </div>\n                <div className=\"shopInfo__middle\">\n                    <div className=\"shopInfo__middleLeft\">\n                        <div className=\"shopInfo__shopName\">{name}</div>\n                        <div className=\"shopInfo__starsWrapper\">\n                            <span className=\"shopInfo__stars\">\n                                <i\n                                    className=\"shopInfo__stars--red\"\n                                    style={{ width: 2 * star + \"%\" }}\n                                />\n                            </span>\n                            <span className=\"shopInfo__distance\">>100km</span>\n                        </div>\n                    </div>\n                    <a className=\"shopInfo__middleRight\" href={`tel://${phone}`}>\n                        <i className=\"shopInfo__phoneIcon\" />\n                    </a>\n                </div>\n                <div className=\"shopInfo__bottom\">\n                    <i className=\"shopInfo__locationIcon\" />{address}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default ShopInfo\n","import React, { Component } from 'react'\nimport './style.css'\n\nclass Detail extends Component {\n    render() {\n        return (\n            <div className=\"detail\">\n                <div className=\"detail__header\">\n                    <span>团购详情</span>\n                    <i className=\"detail__headerIcon\" />\n                </div>\n                <table\n                    cellPadding=\"0\"\n                    cellSpacing=\"0\"\n                    className=\"detail__table\"\n                >\n                    <tbody>\n                        <tr className=\"detail__row\">\n                            <th colSpan=\"3\" className=\"detail__category\">\n                                饮品\n                            </th>\n                        </tr>\n                        <tr className=\"detail__row\">\n                            <td>白果香（冷饮）</td>\n                            <td className=\"detail__td--alignRight\">1扎</td>\n                            <td className=\"detail__td--alignRight\">48元</td>\n                        </tr>\n                        <tr className=\"detail__row\">\n                            <td />\n                            <td className=\"detail__td--price\">\n                                最高价值\n                                <br />\n                                <strong className=\"detail__td--priceNew\">\n                                    团购价\n                                </strong>\n                            </td>\n                            <td className=\"detail__td--price\">\n                                48元\n                                <br />\n                                <strong className=\"detail__td--priceNew\">\n                                    19.9元\n                                </strong>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n                <div className=\"detail__remark\">免费提供餐巾纸</div>\n                <div className=\"detail__more\">\n                    <span>更多图文详情</span>\n                    <span className=\"detail__notice\">\n                        (建议Wifi环境下打卡，土豪请随意)\n                    </span>\n                    <i className=\"detail__arrow\" />\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Detail\n","import React, { Component } from 'react'\nimport './style.css'\n\nclass Remark extends Component {\n    render() {\n        return (\n            <div className=\"remark\">\n                <div className=\"remark__header\">\n                    购买须知\n                    <i className=\"remark__icon\" />\n                </div>\n                <div className=\"remark__list\">\n                    <dl className=\"remark__item\">\n                        <dt className=\"remark__itemTitle\">有效期</dt>\n                        <dd className=\"remark__itemDesc\">\n                            2018-10-20至2019-09-15\n                        </dd>\n                    </dl>\n                    <dl className=\"remark__item\">\n                        <dt className=\"remark__itemTitle\">除外日期</dt>\n                        <dd className=\"remark__itemDesc\">\n                            有效期内周末、法定节假日可用\n                        </dd>\n                    </dl>\n                    <dl className=\"remark__item\">\n                        <dt className=\"remark__itemTitle\">使用时间</dt>\n                        <dd className=\"remark__itemDesc\">\n                            团购券使用时间：11:00-22:00\n                        </dd>\n                    </dl>\n                    <dl className=\"remark__item\">\n                        <dt className=\"remark__itemTitle\">预约提醒</dt>\n                        <dd className=\"remark__itemDesc\">\n                            无需预约，消费高峰时可能需要等位\n                        </dd>\n                    </dl>\n                    <dl className=\"remark__item\">\n                        <dt className=\"remark__itemTitle\">规则提醒</dt>\n                        <dd className=\"remark__itemDesc\">\n                            每张团购券建议2人使用\n                        </dd>\n                    </dl>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Remark\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport './style.css'\r\n\r\nclass BuyButton extends Component {\r\n    render() {\r\n        const { id } = this.props\r\n        return (\r\n            <div className=\"buyButton\">\r\n                {/* TODO: 填写对应产品ID */}\r\n                <Link className=\"buyButton__btn\" to={`/purchase/${id}`}>APP下单返积分抵现金</Link>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BuyButton","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport ProductOverview from './components/ProductOverview';\r\nimport ShopInfo from './components/ShopInfo';\r\nimport Detail from './components/Detail';\r\nimport Remark from './components/Remark';\r\nimport BuyButton from './components/BuyButton';\r\nimport Header from '../../components/Header'\r\nimport { actions, getProduct, getRelatedShop } from '../../redux/modules/detail'\r\n\r\nclass ProductDetail extends Component {\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return true\r\n    }\r\n    \r\n    render() {\r\n        const { product, relatedShop } = this.props\r\n\r\n        return (\r\n            <div>\r\n                <Header title={\"团购详情\"} onBack={this.handleClick}/>\r\n                {product && <ProductOverview data={product} />}\r\n                {relatedShop && <ShopInfo data={relatedShop} total={product.shopIds.length} />}\r\n                {product && (<div>\r\n                    <Detail data={product}/>\r\n                    <Remark data={product}/>\r\n                </div>) }\r\n                <BuyButton id={product ? product.id : ''}/>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleClick = () => {\r\n        this.props.history.goBack();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { product } = this.props\r\n        // 第一次加载好数据，后面不要再重复加载，使用redux的缓存\r\n        if (!product) {\r\n            const productId = this.props.match.params.id\r\n            this.props.loadProductDetail(productId)\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(preProps) {\r\n        const props = this.props\r\n        // 第一次从product中获取商家id，发送请求\r\n        if(!preProps.product && props.product && props.product.nearestShop) {\r\n            const shopId = props.product.nearestShop\r\n            props.loadRelatedShop(shopId)\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    const productId = props.match.params.id\r\n    return {\r\n        product: getProduct(state, productId),\r\n        relatedShop: getRelatedShop(state, productId)\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        loadProductDetail: (id) => {\r\n            dispatch(actions.loadProductDetail(id))\r\n        },\r\n        loadRelatedShop: (id) => {\r\n            dispatch(actions.loadRelatedShop(id))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDetail)\r\n","import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\nclass Header extends Component {\r\n    render() {\r\n        const { color, title, onBack } = this.props\r\n        return (\r\n            <header className=\"header\" style={{ backgroundColor: color }}>\r\n                <div className=\"header__back\" onClick={onBack}> \r\n                    返回\r\n                </div>\r\n                <div className=\"header__title\">{title}</div>\r\n            </header>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header"],"sourceRoot":""}