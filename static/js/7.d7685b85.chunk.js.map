{"version":3,"sources":["containers/Purchase/components/PurchaseForm/index.js","containers/Purchase/index.js","components/Header/index.js","components/Tip/index.js"],"names":["PurchaseForm","handleChange","e","_this","props","onChange","target","value","handleClick","onSubmit","_this$props","this","quantity","price","onDecrease","onIncrease","react_default","a","createElement","className","onClick","type","toFixed","Component","Purchase","purchaseActions","setOrderQuantity","parseInt","handleIncrease","handleDecrease","res","handleSubmit","productId","match","params","id","submitOrder","handleCloseTip","closeTip","handleBack","history","goBack","productDetail","showTip","product","currentPrice","Header","title","color","onBack","components_PurchaseForm","Tip","message","onClose","detailActions","loadProductDetail","connect","state","getProduct","getPurchaseQuantity","getTipStatus","dispatch","bindActionCreators","react__WEBPACK_IMPORTED_MODULE_5___default","style","backgroundColor"],"mappings":"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","file":"static/js/7.d7685b85.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\nclass PurchaseForm extends Component {\r\n    render() {\r\n        const { quantity, price, onDecrease, onIncrease } = this.props\r\n        return (\r\n            <div className=\"purchaseForm\">\r\n                <div className=\"purchaseForm__wrapper\">\r\n                    <div className=\"purchaseForm__row\">\r\n                        <div className=\"purchaseForm__rowLabel\">数量</div>\r\n                        <div className=\"purchaseForm__rowValue\">\r\n                            <span\r\n                                className=\"purchaseForm__counter purchaseForm__counter--dec\"\r\n                                onClick={onDecrease}\r\n                            >\r\n                                -\r\n                            </span>\r\n                            <input\r\n                                type=\"number\"\r\n                                className=\"purchaseForm__quantity\"\r\n                                onChange={this.handleChange}\r\n                                value={quantity ? quantity : 0}\r\n                            />\r\n                            <span\r\n                                className=\"purchaseForm__counter purchaseForm__counter--inc\"\r\n                                onClick={onIncrease}\r\n                            >\r\n                                +\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"purchaseForm__row\">\r\n                        <div className=\"purchaseForm__rowLabel\">小计</div>\r\n                        <div className=\"purchaseForm__rowValue\">\r\n                            <span className=\"purchaseForm__totalPrice\">\r\n                                ¥{(price * quantity).toFixed(2)}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"purchaseForm__row\">\r\n                        <div className=\"purchaseForm__rowLabel\">手机号码</div>\r\n                        <div className=\"purchaseForm__rowValue\">182****2198</div>\r\n                    </div>\r\n                </div>\r\n                <ul className=\"purchaseForm__remark\">\r\n                    <li className=\"purchaseForm__remarkItem\">\r\n                        <i className=\"purchaseForm__sign\" />\r\n                        <span className=\"purchaseForm__desc\">支持随时退</span>\r\n                    </li>\r\n                    <li>\r\n                        <i className=\"purchaseForm__sign\" />\r\n                        <span className=\"purchaseForm__desc\">支持过期退</span>\r\n                    </li>\r\n                </ul>\r\n                <button className=\"purchaseForm__submit\" onClick={this.handleClick}>\r\n                    提交订单\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        this.props.onChange(e.target.value)\r\n    }\r\n\r\n    handleClick = () => {\r\n        this.props.onSubmit()\r\n    }\r\n}\r\n\r\nexport default PurchaseForm\r\n","import React, { Component } from 'react'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport Header from '../../components/Header'\r\nimport PurchaseForm from './components/PurchaseForm'\r\nimport {\r\n    actions as purchaseActions,\r\n    getPurchaseQuantity,\r\n    getTipStatus,\r\n    getProduct\r\n} from '../../redux/modules/purchase'\r\nimport { actions as detailActions } from '../../redux/modules/detail'\r\nimport Tip from '../../components/Tip'\r\n\r\nimport './style.css'\r\n\r\nclass Purchase extends Component {\r\n    render() {\r\n        const {\r\n            productDetail,\r\n            quantity,\r\n            showTip\r\n        } = this.props\r\n        if (!productDetail) return null\r\n        const { product, currentPrice } = productDetail\r\n        return (\r\n            <div>\r\n                <Header title=\"下单\" color={'#fff'} onBack={this.handleBack} />\r\n                <h3 className=\"purchase__header\">{product}</h3>\r\n                <PurchaseForm\r\n                    quantity={quantity}\r\n                    price={currentPrice}\r\n                    onChange={this.handleChange}\r\n                    onIncrease={this.handleIncrease}\r\n                    onDecrease={this.handleDecrease}\r\n                    onSubmit={this.handleSubmit}\r\n                />\r\n                {showTip ? (\r\n                    <Tip message=\"购买成功！\" onClose={this.handleCloseTip} />\r\n                ) : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    componentDidMount() {\r\n        //组件加载完成后，通过地址栏参数的产品id去获取产品价格信息\r\n        const id = this.props.match.params.id\r\n        // 使用detail下的action发送请求产品数据\r\n        this.props.detailActions.loadProductDetail(id)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // 组件删除时，保持状态为初始值：订单选择数量为1\r\n        this.props.purchaseActions.setOrderQuantity(1)\r\n    }\r\n\r\n    handleChange = quantity => {\r\n        this.props.purchaseActions.setOrderQuantity(parseInt(quantity))\r\n    }\r\n\r\n    handleIncrease = () => {\r\n        const { quantity } = this.props\r\n        this.props.purchaseActions.setOrderQuantity(quantity + 1)\r\n    }\r\n\r\n    handleDecrease = () => {\r\n        const { quantity } = this.props\r\n        const res = quantity - 1\r\n        this.props.purchaseActions.setOrderQuantity(res <= 1 ? 1 : res)\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        const productId = this.props.match.params.id\r\n        this.props.purchaseActions.submitOrder(productId)\r\n    }\r\n\r\n    handleCloseTip = () => {\r\n        this.props.purchaseActions.closeTip()\r\n    }\r\n\r\n    handleBack = () => {\r\n        this.props.history.goBack()\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    const productId = props.match.params.id\r\n    return {\r\n        productDetail: getProduct(state, productId),\r\n        quantity: getPurchaseQuantity(state),\r\n        showTip: getTipStatus(state)\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        purchaseActions: bindActionCreators(purchaseActions, dispatch),\r\n        detailActions: bindActionCreators(detailActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Purchase)\r\n","import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\nclass Header extends Component {\r\n    render() {\r\n        const { color, title, onBack } = this.props\r\n        return (\r\n            <header className=\"header\" style={{ backgroundColor: color }}>\r\n                <div className=\"header__back\" onClick={onBack}> \r\n                    返回\r\n                </div>\r\n                <div className=\"header__title\">{title}</div>\r\n            </header>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header","import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\nclass Tip extends Component {\r\n    render() {\r\n        const { message, onClose } = this.props\r\n        return (\r\n            <div className=\"tip\">\r\n                <div className=\"tip__alert\">\r\n                    <div className=\"tip__content\">{message}</div>\r\n                    <div className=\"tip__btns\">\r\n                        <button className=\"tip__btn\" onClick={onClose}>\r\n                            确定\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Tip\r\n"],"sourceRoot":""}